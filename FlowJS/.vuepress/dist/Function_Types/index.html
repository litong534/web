<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Function Types (函数类型)</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/styles.084dee6b.css" as="style"><link rel="preload" href="/assets/js/app.084dee6b.js" as="script"><link rel="preload" href="/assets/js/5.7386d2b6.js" as="script"><link rel="prefetch" href="/assets/css/1.styles.bbb68a50.css"><link rel="prefetch" href="/assets/css/2.styles.a2bd3099.css"><link rel="prefetch" href="/assets/js/1.bbb68a50.js"><link rel="prefetch" href="/assets/js/10.55c25e75.js"><link rel="prefetch" href="/assets/js/11.9fd69c7c.js"><link rel="prefetch" href="/assets/js/12.40ccbb78.js"><link rel="prefetch" href="/assets/js/13.e9f4738b.js"><link rel="prefetch" href="/assets/js/2.a2bd3099.js"><link rel="prefetch" href="/assets/js/3.8d0df0be.js"><link rel="prefetch" href="/assets/js/4.ec0f5e32.js"><link rel="prefetch" href="/assets/js/6.7178e768.js"><link rel="prefetch" href="/assets/js/7.3fb4ed2a.js"><link rel="prefetch" href="/assets/js/8.836ac591.js"><link rel="prefetch" href="/assets/js/9.9d37b14f.js">
    <link rel="stylesheet" href="/assets/css/1.styles.bbb68a50.css"><link rel="stylesheet" href="/assets/css/2.styles.a2bd3099.css"><link rel="stylesheet" href="/assets/css/styles.084dee6b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/Type_Annotations/" class="sidebar-link">Type Annotations (类型注释)</a></li><li><a href="/Primitive_Types/" class="sidebar-link">Primitive Types (基本类型)</a></li><li><a href="/Literal_Types/" class="sidebar-link">Literal Types (字面类型)</a></li><li><a href="/Mixed_Types/" class="sidebar-link">Mixed Types (混合类型)</a></li><li><a href="/Any_Types/" class="sidebar-link">Any Types (any类型)</a></li><li><a href="/Maybe_Types/" class="sidebar-link">Maybe Types (待定类型)</a></li><li><a href="/Variable_Types/" class="sidebar-link">Variable Types (变量类型)</a></li><li><a href="/Function_Types/" class="active sidebar-link">Function Types (函数类型)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Function_Types/#function-types-函数类型" class="sidebar-link">Function Types (函数类型)</a></li></ul></li><li><a href="/Object_Types/" class="sidebar-link">Object Types (对象类型)</a></li><li><a href="/Array_Types/" class="sidebar-link">Array Types (数组类型)</a></li><li><a href="/Tuple_Types/" class="sidebar-link">Tuple Types(元组类型)</a></li></ul> </div> <div class="page"> <div class="content"><h2 id="function-types-函数类型"><a href="#function-types-函数类型" aria-hidden="true" class="header-anchor">#</a> Function Types (函数类型)</h2> <p>函数有两个地方类型声明可以使用：参数与返回值</p> <p>分别对应了函数的输入和输出</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// @flow</span>
<span class="token keyword">function</span> <span class="token function">concat</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> string<span class="token punctuation">,</span> b<span class="token punctuation">:</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Works!</span>
<span class="token comment">// $ExpectError</span>
<span class="token function">concat</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Error!</span>
</code></pre></div><p>flow有自动推断功能，这些类型通常是可选的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// @flow</span>
<span class="token keyword">function</span> <span class="token function">concat</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Works!</span>
<span class="token comment">// $ExpectError</span>
<span class="token function">concat</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Error!</span>
</code></pre></div><p>有时flow的推断会比较宽松</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// @flow</span>
<span class="token keyword">function</span> <span class="token function">concat</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Works!</span>
<span class="token function">concat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// Works!</span>
</code></pre></div><p>所以，为重要的函数声明类型是很有必要的</p> <h3 id="函数的语法"><a href="#函数的语法" aria-hidden="true" class="header-anchor">#</a> 函数的语法</h3> <p>这里有三种形式的函数，各自拥有稍有不同的语法</p> <h4 id="函数声明"><a href="#函数声明" aria-hidden="true" class="header-anchor">#</a> 函数声明</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> bool<span class="token punctuation">,</span> <span class="token operator">...</span>nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>str<span class="token punctuation">:</span> string<span class="token punctuation">,</span> bool<span class="token operator">?</span><span class="token punctuation">:</span> boolean<span class="token punctuation">,</span> <span class="token operator">...</span>nums<span class="token punctuation">:</span> Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="箭头函数"><a href="#箭头函数" aria-hidden="true" class="header-anchor">#</a> 箭头函数</h4> <p>这里你能看到有与没有类型声明添加的箭头函数语法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token punctuation">(</span>str<span class="token punctuation">,</span> bool<span class="token punctuation">,</span> <span class="token operator">...</span>nums<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> method <span class="token operator">=</span> <span class="token punctuation">(</span>str<span class="token punctuation">:</span> string<span class="token punctuation">,</span> bool<span class="token operator">?</span><span class="token punctuation">:</span> boolean<span class="token punctuation">,</span> <span class="token operator">...</span>nums<span class="token punctuation">:</span> Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="函数类型"><a href="#函数类型" aria-hidden="true" class="header-anchor">#</a> 函数类型</h4> <p>这里你可以看到编写函数类型的语法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span>str<span class="token punctuation">:</span> string<span class="token punctuation">,</span> bool<span class="token operator">?</span><span class="token punctuation">:</span> boolean<span class="token punctuation">,</span> <span class="token operator">...</span>nums<span class="token punctuation">:</span> Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
</code></pre></div><p>你也可以选择性的不声明参数名</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span>string<span class="token punctuation">,</span> boolean <span class="token operator">|</span> <span class="token keyword">void</span><span class="token punctuation">,</span> Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
</code></pre></div><p>你可以使用这些函数类型来声明回调</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>callback<span class="token punctuation">:</span> <span class="token punctuation">(</span>error<span class="token punctuation">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> string <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="函数参数"><a href="#函数参数" aria-hidden="true" class="header-anchor">#</a> 函数参数</h3> <p>函数参数可以使用:来声明，紧跟在参数名称后面输入类型</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>param1<span class="token punctuation">:</span> string<span class="token punctuation">,</span> param2<span class="token punctuation">:</span> boolean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="可选参数"><a href="#可选参数" aria-hidden="true" class="header-anchor">#</a> 可选参数</h4> <p>你也可以声明有选择性的参数，通过增加?在参数名之后，在:之前</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>optionalValue<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可选参数可以接受不传，undefined，或者匹配的类型，但是不接受null</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// @flow</span>
<span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>optionalValue<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// Works.</span>
<span class="token function">method</span><span class="token punctuation">(</span>undefined<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Works.</span>
<span class="token function">method</span><span class="token punctuation">(</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Works.</span>
<span class="token comment">// $ExpectError</span>
<span class="token function">method</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// Error!</span>
</code></pre></div><h4 id="剩余参数"><a href="#剩余参数" aria-hidden="true" class="header-anchor">#</a> 剩余参数</h4> <p>javascript也支持剩余参数</p> <p>你也可以为剩余参数增加类型，只不过你需要使用Array来声明</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">:</span> Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你可以传递尽可能多的参数到剩余参数中</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// @flow</span>
<span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">:</span> Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Works.</span>
<span class="token function">method</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// Works.</span>
<span class="token function">method</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Works.</span>
<span class="token function">method</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Works.</span>
</code></pre></div><h4 id="函数返回值"><a href="#函数返回值" aria-hidden="true" class="header-anchor">#</a> 函数返回值</h4> <p>函数返回值也可以使用:来声明，跟在参数列表后面</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> number <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>返回值类型确保你的函数每个分支都返回相同类型，防止你在某个条件下忘记返回</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// @flow</span>
<span class="token comment">// $ExpectError</span>
<span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> boolean <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="函数的this"><a href="#函数的this" aria-hidden="true" class="header-anchor">#</a> 函数的this</h4> <p>每个函数在javascript里都可以被一个特殊的上下文this调用，你可以在你希望的任何上下文中调用该函数</p> <p>在flow中你不用声明this，flow会去检测你当前调用的上下文是什么</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> num<span class="token punctuation">:</span> number <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// $ExpectError</span>
<span class="token keyword">var</span> str<span class="token punctuation">:</span> string <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="断言函数"><a href="#断言函数" aria-hidden="true" class="header-anchor">#</a> 断言函数</h4> <p>有时你希望使用一个断言函数的返回值来代表if语句中的判断逻辑</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">concat</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token operator">?</span>string<span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token operator">?</span>string<span class="token punctuation">)</span><span class="token punctuation">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>但是flow会报告一个错误</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">truthy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span> boolean <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">concat</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token operator">?</span>string<span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token operator">?</span>string<span class="token punctuation">)</span><span class="token punctuation">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">truthy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// $ExpectError</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你可以修复这个问题，通过使用%checks注解来把truthy函数转变成一个断言函数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">truthy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span> boolean <span class="token operator">%</span>checks <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>a <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">concat</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token operator">?</span>string<span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token operator">?</span>string<span class="token punctuation">)</span><span class="token punctuation">:</span> string <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">truthy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>断言函数的函数体需要是一个表达式，本地变量声明是不被支持的，另外你也可以嵌套断言函数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isString</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token operator">%</span>checks <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> y <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isNumber</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token operator">%</span>checks <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> y <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isNumberOrString</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token operator">%</span>checks <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">isString</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isNumber</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span> string <span class="token operator">|</span> number <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNumberOrString</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// no error, because Flow infers that x can only be an array</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="可调用对象"><a href="#可调用对象" aria-hidden="true" class="header-anchor">#</a> 可调用对象</h4> <p>可调用对象可以被声明类型，举个栗子</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>type CallableObj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>number<span class="token punctuation">,</span> number<span class="token punctuation">)</span><span class="token punctuation">:</span> number<span class="token punctuation">,</span>
  bar<span class="token punctuation">:</span> string
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token comment">// $ExpectError</span>
<span class="token punctuation">(</span>add<span class="token punctuation">:</span> CallableObj<span class="token punctuation">)</span><span class="token punctuation">;</span>

add<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>add<span class="token punctuation">:</span> CallableObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="函数类型-2"><a href="#函数类型-2" aria-hidden="true" class="header-anchor">#</a> 函数类型</h4> <p>有时你希望可以接受任意的函数，这时你可以写() =&gt; mixed，举个栗子</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>func<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> mixed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>但是，如果你希望不使用类型检查，并且不像使用any这种方式，你可以使用Function来代替，但是Function是不安全并且是应该避免的写法</p> <p>举个栗子，下面的代码不会报告任何错误</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>func<span class="token punctuation">:</span> Function<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">func</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Works.</span>
  <span class="token function">func</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Works.</span>
  <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Works.</span>
<span class="token punctuation">}</span>

<span class="token function">method</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> number<span class="token punctuation">,</span> b<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Variable_Types/" class="prev">
          Variable Types (变量类型)
        </a></span> <span class="next"><a href="/Object_Types/">
          Object Types (对象类型)
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/5.7386d2b6.js" defer></script><script src="/assets/js/app.084dee6b.js" defer></script>
  </body>
</html>
