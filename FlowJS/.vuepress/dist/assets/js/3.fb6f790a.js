(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{156:function(t,a,s){"use strict";s.r(a);var n=s(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h2",{attrs:{id:"any-types-any类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#any-types-any类型","aria-hidden":"true"}},[t._v("#")]),t._v(" Any Types (any类型)")]),t._v(" "),s("p",[t._v("如果你想要一种方法来逃避类型检查，any是你想要的答案，"),s("strong",[t._v("但是使用any是完全不安全的，在任何情况下建议都不要使用它")])]),t._v(" "),s("p",[t._v("依然举个栗子，下面的代码不会报告任何异常")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// @flow")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("add")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("one"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" two"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" number "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" one "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" two"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token function"}},[t._v("add")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("1")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("2")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),s("span",{attrs:{class:"token comment"}},[t._v("// Works.")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("add")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"1"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"2"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// Works.")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("add")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),s("span",{attrs:{class:"token comment"}},[t._v("// Works.")]),t._v("\n")])])]),s("p",[t._v("甚至是会报告运行时异常的错误Flow都不会报告")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// @flow")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("getNestedProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baz"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token function"}},[t._v("getNestedProperty")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("只用这几种场景你可以考虑使用any:")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("当你想要在已经存在的代码上增加Flow来进行类型检查，并且你在增加类型检查时被阻碍了（也许你的代码需要首先被重写一下）")])]),t._v(" "),s("li",[s("p",[t._v("\b当你确定你的代码运行良好，由于某些原因Flow不能正常进行类型检查，比如javascript新增加的一些语法，Flow暂时无法正确\b运行")])])]),t._v(" "),s("h3",{attrs:{id:"避免any溢出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#避免any溢出","aria-hidden":"true"}},[t._v("#")]),t._v(" 避免any溢出")]),t._v(" "),s("p",[t._v("当你对一个参数使用了any，会使代码链上所有的值都变成any类型")]),t._v(" "),s("p",[t._v("举个栗子，如果你得到了一个属性被声明为any，结果同样会声明为any类型")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// @flow")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("fn")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" foo "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:any) */")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("你可能在后续操作中又用到foo，这样你后续操作得到的值也会变成any类型")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// @flow")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("fn")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" foo "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:any) */")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" bar "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:any) */")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" foo "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("2")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("当你继续操作之后，any会占领你的整个代码链")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// @flow")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("fn")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:any) */")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" foo "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:any) */")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" bar "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:any) */")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" foo "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("2")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" bar"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" bar "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:any) */")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("fn")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" baz "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:any) */")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"baz:"')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" bar"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("想避免这种情况发生，你需要在整个代码链中尽快斩断any的传播，将中间量声明为其他类型")]),t._v(" "),s("div",{staticClass:"language-javascipt extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// @flow\nfunction fn(obj: any) {\n  let foo: number = obj.foo;\n}\n")])])]),s("p",[t._v("现在你的代码不会再被any污染了✅")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// @flow")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("fn")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:number) */")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" number "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" bar "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:number) */")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" foo "),s("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("2")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" bar"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" bar "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:number) */")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("fn")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" foo"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" baz "),s("span",{attrs:{class:"token comment"}},[t._v("/* (:string) */")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"baz:"')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" bar"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])])])}],!1,null,null,null);o.options.__file="Any_Types.md";a.default=o.exports}}]);